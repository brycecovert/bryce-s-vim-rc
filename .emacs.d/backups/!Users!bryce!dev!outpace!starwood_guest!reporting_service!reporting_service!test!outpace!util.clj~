(ns outpace.reporting-service.util
  (:require [clojure.test :refer :all]
            [outpace.reporting-service.db :refer :all]
            [outpace.reporting-service.db.bundle-profile :as bundle-profile]
            [outpace.reporting-service.db.data-source :as data-source]
            [outpace.reporting-service.db.bundle-report :as bundle-report]
            [outpace.reporting-service.db.job :as job]
            [outpace.reporting-service.db.job-event :as job-event]
            [outpace.reporting-service.db.report :as report]
            [clojure.java.jdbc :as sql]
            [schema.test :as st]
            [clj-time.core :as time]
            [clj-time.local :as local]))


(defn test-data-source [& [data-source]]
  (merge {:name "Some data source" :uri "http://foo.com" :metadata-uri "http://bar.com"} data-source))

(defn test-report [& [report]]
  (merge {:title "A report" :columns [:column1] :column-specs {:column1 :abc} :params {}} report))

(defn test-bundle-profile [& [bundle-profile]]
  (merge {:recurrence "monthly" :name "A Report Bundle" :subject "A test subject" :body "A test body"}))

(defn test-profile-job [& [job]]
  (merge {:email-address "an@email.com"
          :status "created"
          :params {}
          :start-timestamp (time/date-time 2012 11 4)
          :complete-timestamp (time/date-time 2013 11 4)}
         job))
